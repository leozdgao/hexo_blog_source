title: "TCP/IP基础知识"
date: 2015-02-15 11:32:50
tags:
categories: 计算机网络基础
---

##TCP/IP的诞生

| 年份 | 事件 |
|------|------|
| 20世纪60年代后半叶 | 应DoD要求，美国开始进行通信技术相关的研发。 |
| 1969年 | ARPANET诞生。开发分组交换技术。 |
| 1972年 | ARPANET取得初步成功。扩展到50个节点。 |
| 1975年 | TCP/IP诞生。 |
| 1982年 | TCP/IP规范出炉。UNIX是最早开始实现TCP/IP的协议。 |
| 1983年 | ARPANET决定正式启用TCP/IP为通信协议。 |
| 1989年左右 | 局域网上的TCP/IP应用迅速扩大。 |
| 1990年左右 | 不论是局域网还是广域网，都开始倾向于使用TCP/IP。 |
| 1995年左右 | 互联网开始商用，互联网服务供应商的数量剧增。 |
| 1996年 | IPv6规范出炉，载入RFC。（后于1998年修订） |

**ISP**互联网接入服务提供商 Internet Service Provider

<!-- more -->

##TCP/IP的标准化

TCP/IP协议是指利用IP进行通信时所必须摇动的协议群的统称。

TCP/IP协议由IETF讨论制定，并被列入RFC文档。对某个协议的扩展或修改都将废除老的RFC，重新发行一个新的RFC文档。

TCP/IP的标准化流程：
- 互联网草案阶段
- 记入RFC进入提议标准阶段
- 草案标准阶段
- 正式成为标准

##互联网基础知识

**互联网**是指由ARPANET发展而来、互连全世界的计算机网络。TCP/IP原本就是为使用互联网而制定的协议族。因此，互联网的协议就是TCP/IP，TCP/IP就是互联网的协议。

**NOC** 网络操作中心 Network Operation Center

**IX** 网络交换中心 Internet Exchange

互联网就是众多异构的网络通过IX互连的一个巨型网络。

##TCP/IP协议分层模型

1. 硬件（物理层）
负责数据传输的硬件，没有既定的标准

2. 网络接口层（数据链路层）
利用以太网中的数据链路层进行通信，可以把它当作让NIC（网卡）起作用的“驱动程序”

3. 互联网层（网络层）
使用IP协议，基于IP地址转发分包数据。IP、ICMP、ARP。

4. 传输层
主要功能是让应用程序之间实现通信。TCP、UDP。

5. 应用层（会话层以上的分层）
WWW（Web浏览器上网 HTTP）、Email（电子邮件 SMTP）、FTP（文件传输）、TELNET与SSH（远程登录）、SNMP（网络管理）

##TCP/IP分层模型通信实例

每个分层中，都会对所发送的数据附加一个首部，在这个首部中包含了该层必要的信息。在下一层的角度看，从上一分层收到的包全部都被认为是本层的数据。

首先应用程序中会进行编码处理，随后建立TCP连接，利用这个TCP连接发送数据。TCP提供将应用层发来的数据顺利发送至对端的可靠传输，TCP首部中包括源端口号和目标端口号、序号以及校验和。IP将TCP传来的TCP首部和TCP数据合起来做自己的数据。IP首部中包含接收端IP地址以及发送端IP地址，还有用来判断其后面是TCP还是UDP的信息。从IP传来的IP包，以太网驱动给这数据附上以太网首部，包含接收端MAC地址、发送端MAC地址以及标志以太网类型的以太网数据的协议。

每个包首部中之后会包含两个信息：一个是**发送端和接收端地址**，另一个是**上一次的协议类型**。经过每个协议分层时，都必须有识别包发送端和接收端的信息，以太网会用MAC地址，IP会用IP地址，而TCP/UDP则会用端口号作为识别两端主机的地址。

主机接受到以太网包以后，首先从以太网首部找到MAC地址半段是否为发送给自己的包，如果不是则丢弃数据。之后判断上层协议类型，交给相应的子程序处理，比如处理IP的子程序。IP模块检查目标IP地址是否与自己的IP地址匹配，之后交由TCP或UDP子程序处理，如果是路由器，需要借助路由控制表再转发数据。在TCP模块中，首先会计算校验和，判断数据是否被破坏，然后检查是否按照序号接受数据，最后检查端口号，确定具体应用程序。数据就收完毕后，就手段则发送一个“确认回执”给发送端。如果这个回执信息未能送达发送端，那么发送端会认为接收端没有收到数据而一直反复发送。

